{"ast":null,"code":"function _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == typeof i ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != typeof i) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _unsupportedIterableToArray(arr, i) || _nonIterableRest(); }\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nfunction _iterableToArrayLimit(r, l) { var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"]; if (null != t) { var e, n, i, u, a = [], f = !0, o = !1; try { if (i = (t = t.call(r)).next, 0 === l) { if (Object(t) !== t) return; f = !1; } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0); } catch (r) { o = !0, n = r; } finally { try { if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return; } finally { if (o) throw n; } } return a; } }\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\nfunction getMainBoard() {\n  var mainBoard = $(\".board-wrapper > table > tbody\").first();\n  window.mainBoard = mainBoard;\n  return mainBoard;\n}\nfunction showBoardNotice(message) {\n  var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';\n  var bgClass = 'bg-' + type;\n  $(\"#board_notice\").removeClass(bgClass).addClass(bgClass).text(message).css('opacity', 1);\n  window.setTimeout(function () {\n    $(\"#board_notice\").css('opacity', 0);\n  }, 2000);\n}\nwindow.showBoardNotice = showBoardNotice;\nMAX_CARDS_PER_DECK = 15; // Best to refer this to backend constant\nwindow.MAX_CARDS_PER_DECK = MAX_CARDS_PER_DECK;\n\n/* Status and questionaire functions ******************/\nfunction isCardAcceptableToTile(card, tile) {\n  var isAcceptable = card.attr('data-player') == tile.attr('data-player');\n  var msg = isAcceptable ? '' : \"Currently this tile is not claimed by you.\";\n  var currentTurnUserId = $(\"#game_current_turn_user_id\").val();\n  if (isAcceptable && currentTurnUserId && currentTurnUserId != '') {\n    isAcceptable = card.attr('data-player') == currentTurnUserId;\n    msg = isAcceptable ? '' : \"Currently it is not your turn to make move.\";\n  }\n  // check card's pawn_rank vs tile's pawn_value\n  if (isAcceptable && card.data('pawn-rank') && tile.data('pawn-value')) {\n    isAcceptable = parseInt(card.data('pawn-rank')) <= parseInt(tile.data('pawn-value'));\n    msg = isAcceptable ? '' : \"This card requires the tile w/ \" + card.data('pawn-rank') + \"+ pawns\";\n  }\n  return [isAcceptable, msg];\n}\nfunction shouldDragRevertDragToTile() {\n  //////////console.log(\"Should revert? \" + $(this).attr('id') + \" w/ \" + $(this).attr('class') );\n  return !$(this).hasClass('card-dropped');\n}\n\n/* Action Handlers *************************************/\nfunction dropCardHandler(event, ui) {\n  var _isCardAcceptableToTi = isCardAcceptableToTile(ui.draggable, $(this)),\n    _isCardAcceptableToTi2 = _slicedToArray(_isCardAcceptableToTi, 2),\n    shouldAccept = _isCardAcceptableToTi2[0],\n    msg = _isCardAcceptableToTi2[1];\n  //console.log(\"Card dropped \" + ui.draggable.attr('id') + \" on \" + $(this).attr('id') + \" => \"+ shouldAccept );\n\n  if (shouldAccept) {\n    ui.draggable.data('board-tile-id', $(this).attr('id'));\n    ui.draggable.draggable('disable');\n    //$(this).droppable( 'disable' );\n    //ui.draggable.position( { of: $(this), my: 'left top', at: 'left top' } );\n    var whichPlayer = ui.draggable.data('player');\n    $(this).html('');\n    $(ui.draggable).detach().appendTo($(this));\n    ui.draggable.addClass('card-dropped');\n    ui.draggable.removeClass('small-card');\n    ui.draggable.draggable('option', 'revert', false);\n    $(\"#game_move_card_id\").val(ui.draggable.attr('data-card-id'));\n    $(\"#game_move_game_board_tile_id\").val($(this).attr('data-game-board-tile-id'));\n    $(\"#game_move_submit_button\").trigger('click'); // $(\"#game_move_form\").trigger('submit');\n\n    $(this).attr('data-claiming-player', whichPlayer); // If drop onto pawn, would be unnecessary\n  } else {\n    // console.log(\"> Cannot drop this card here!\");\n    showBoardNotice(msg == '' ? \"Cannot drop this card here!\" : msg, 'warning');\n  }\n  resetHLTiles();\n}\n/* Dry run that only renders the effects of the card placement.\n* Iterates over the pawn-tiles and affected-tiles of the card to highlight the tiles that would be affected.\n*/\nfunction previewCardPlacementEffect(board, tile, card) {\n  var shouldAccept = isCardAcceptableToTile(card, tile);\n  //////////// console.log(\"Card hover - preview \" + card.attr('data-player') + \" on \" + tile.attr('data-player') + \" => \"+ shouldAccept );\n  if (!shouldAccept) {\n    tile.find(\".disabled-icon\").removeClass('d-none');\n    return;\n  }\n  var pawnTiles = card.data('pawn-tiles');\n  var affectedTiles = card.data('affected-tiles');\n  var abilities = card.data('ability-effects');\n  if (typeof abilities == 'string' && abilities != '') {\n    abilities = eval(abilities);\n  }\n  tile.addClass('center-tile');\n  var tileX = parseInt(tile.data('tile-position').split(',')[0]);\n  var tileY = parseInt(tile.data('tile-position').split(',')[1]);\n  if (typeof pawnTiles == 'string') {\n    pawnTiles = eval(pawnTiles);\n  }\n  pawnTiles.forEach(function (pawnTile) {\n    var col = tileX + pawnTile[0];\n    var row = tileY + pawnTile[1];\n    var targetTile = board.find('.board-tile[data-tile-position=\"' + col + ',' + row + '\"]');\n    if (targetTile.length > 0) {\n      targetTile.addClass('highlight-tile');\n      targetTile.children('.card').addClass('highlight-tile');\n    }\n  });\n  if (typeof affectedTiles == 'string') {\n    affectedTiles = eval(affectedTiles);\n  }\n  affectedTiles.forEach(function (aTile) {\n    var col = tileX + aTile[0];\n    var row = tileY + aTile[1];\n    var targetTile = board.find('.board-tile[data-tile-position=\"' + col + ',' + row + '\"]');\n    if (targetTile.length > 0) {\n      abilities.forEach(function (ability) {\n        targetTile.addClass('highlight-tile');\n        targetTile.children('.card').addClass('highlight-tile');\n        // console.log(\"Preview ability effect to \" + targetTile.attr('id') + \" => \" + ability['action_typeß'] );\n        previewVisualEffectTo(tile, targetTile, ability);\n      });\n    }\n  });\n}\nfunction resetHLTiles() {\n  var board = getMainBoard();\n  board.find('.highlight-tile').removeClass('highlight-tile');\n  board.find('.center-tile').find(\".disabled-icon\").addClass('d-none');\n  board.find('.center-tile').removeClass('center-tile');\n  board.find('.preview-effect-label').each(function (n) {\n    $(this).remove();\n  });\n}\n/* \n* Renders the visual effect of the card placement on the target tile based on ability.\n*/\nfunction previewVisualEffectTo(sourceTile, targetTile, ability) {\n  if (ability['action_type'] == 'power_up') {\n    $(targetTile.children()[0]).append(\"<h3 class='preview-effect-label powerup-effect'> +\" + ability['action_value'] + \"</h3>\");\n  } else if (ability['action_type'] == 'power_down') {\n    $(targetTile.children()[0]).append(\"<h3 class='preview-effect-label powerdown-effect'> -\" + ability['action_value'] + \"</h3>\");\n  }\n}\nfunction syncCardSelectionToInputs() {\n  var cardIds = [];\n  $('#deck_cards_wrapper > *[data-card-id]').each(function (index, element) {\n    var cardId = $(element).data('card-id');\n    cardIds.push(cardId);\n  });\n  $(\"#deck_form input[name='card_ids[]']\").each(function (index, element) {\n    $(element).val(cardIds[index] || '');\n  });\n}\nfunction showDetailOfCardInCanvas() {\n  var s = \"<img src='\" + $(this).data('image-url') + \"' class='img-fluid' />\";\n  if ($(this).data('card-id')) {\n    s += \"<div class='text-center'><a href=\\'/cards/\" + $(this).data('card-id') + \"'><label class='bi bi-info-square-fill text-primary text-medium'/> Show detail of card</a></div>\";\n  }\n  $('#detail_offcanvas').find('.offcanvas-body').html(s);\n}\nfunction showDetailLinkOfCard() {\n  $(this).find('.card-detail-image').removeClass('d-none');\n}\nfunction hideDetailLinkOfCard() {\n  var _this = this;\n  setTimeout(function () {\n    $(_this).find('.card-detail-image').addClass('d-none');\n  }, 3000);\n}\nfunction addCardToSelection(event) {\n  var userCardId = $(this).data('user-card-id');\n  var cardId = $(this).data('card-id');\n  var quantityInput = $(this).siblings('*[data-quantity]');\n  if (quantityInput) {\n    var quantity = parseInt(quantityInput.text()) || 0;\n    var countOfCardsInDeck = $(\"#deck_cards_wrapper > *[data-card-id]\").length;\n    if (quantity < 1) {\n      quantityInput.addClass('warning-short-blink');\n    } else if (countOfCardsInDeck >= MAX_CARDS_PER_DECK) {\n      $(\"#max_cards_per_deck_note\").addClass('warning-short-blink');\n      alert(\"You can only have \" + MAX_CARDS_PER_DECK + \" cards in your deck.\");\n    } else {\n      quantity -= 1;\n      quantityInput.text(quantity);\n      var userCard = $(\"#user_card_\" + userCardId).clone();\n      $(userCard).prop('id', 'user_card_clone_' + userCardId);\n      $(userCard).attr('data-user-card-id', '');\n      $(userCard).removeClass('card-selectable');\n      var actionRow = $(userCard).children();\n      $(actionRow).children('.user-card-quantity-input').addClass('d-none');\n      $(actionRow).children('.user-card-add-button').addClass('d-none');\n      $(actionRow).children('.user-card-remove-button').removeClass('d-none');\n      $(userCard).appendTo($(\"#deck_cards_wrapper\"));\n      $(\"#user_card_clone_\" + userCardId + \" > .card-actions-row > .user-card-remove-button\").click(removeCardFromSelection);\n    }\n    $(\"#user_cards_wrapper > *[data-user-card-id='\" + userCardId + \"']\").css('opacity', quantity < 1 ? '0.5' : '1');\n    syncCardSelectionToInputs();\n  }\n}\nfunction removeCardFromSelection() {\n  var card = $(this).parent().parent();\n  var cardId = $(card).data('card-id');\n  var userCard = $(\"#user_cards_wrapper > *[data-card-id='\" + cardId + \"']\");\n  if (userCard) {\n    var quantityInput = $(\"#user_cards_wrapper > *[data-card-id='\" + cardId + \"'] *[data-quantity]\");\n    if (quantityInput.length > 0) {\n      var quantity = parseInt($(quantityInput).text()) || 0;\n      quantity++;\n      $(quantityInput).text(quantity);\n      $(\"#user_cards_wrapper > *[data-card-id='\" + cardId + \"']\").css('opacity', quantity < 1 ? '0.5' : '1');\n    }\n    $(card).detach().remove();\n    // Even after removal, the #user_cards_wrapper\n    syncCardSelectionToInputs();\n  }\n}\n\n/* Load functions ########################################### */\n\nfunction setupCardInteractions() {\n  $(\".draggable\").draggable(_defineProperty({\n    \"opacity\": 0.35,\n    revert: false,\n    snap: \".board-tile\",\n    snapMode: \"inner\",\n    snapTolerance: 30,\n    stack: \".card-wrapper div\"\n  }, \"revert\", shouldDragRevertDragToTile));\n}\nfunction setupBoardInteractions() {\n  $(\".droppable\").droppable({\n    hoverClass: \"card-drop-hover\",\n    accept: '.card',\n    drop: dropCardHandler,\n    over: function over(event, ui) {\n      /////// console.log(\"Card over \" + $(this).attr('id'));\n      //$(ui.draggable).children(\".bi\").removeClass('d-none');\n      $(this).addClass('center-tile');\n      previewCardPlacementEffect(getMainBoard(), $(this), $(ui.draggable));\n    },\n    out: function out(event, ui) {\n      /////// console.log(\"Card out \" + $(this).attr('id'));\n      //$(ui.draggable).children(\".bi\").addClass('d-none');\n      resetHLTiles();\n    }\n  });\n\n  /* $(document).on(\"dragstart\", \"card\", function (event) {\n    console.log(\"Card dragging \" + $(this).attr('id') );\n  }); */\n\n  $(document).on(\"dragstop\", \".card\", function (event) {\n    $(this).children(\".bi\").addClass('d-none');\n  });\n  $('.user-card-add-button').click(addCardToSelection);\n  $('.user-card-remove-button').click(removeCardFromSelection);\n  $(\".card-detail-link[data-image-url]\").click(showDetailOfCardInCanvas);\n  $(\".card[data-card-id]\").on('mouseover', showDetailLinkOfCard);\n  $(\".card[data-card-id]\").on('mouseout', hideDetailLinkOfCard);\n  window.showDetailOfCardInCanvas = showDetailOfCardInCanvas;\n  syncCardSelectionToInputs();\n  $(\"*[data-bs-toggle='tooltip'\").tooltip();\n}\n\n// Initialization\n$(document).on(\"turbolinks:load\", function () {\n  setupCardInteractions();\n  setupBoardInteractions();\n  $(\"*[data-bs-toggle='tooltip'\").tooltip();\n});","map":{"version":3,"names":["getMainBoard","mainBoard","$","first","window","showBoardNotice","message","type","arguments","length","undefined","bgClass","removeClass","addClass","text","css","setTimeout","MAX_CARDS_PER_DECK","isCardAcceptableToTile","card","tile","isAcceptable","attr","msg","currentTurnUserId","val","data","parseInt","shouldDragRevertDragToTile","hasClass","dropCardHandler","event","ui","_isCardAcceptableToTi","draggable","_isCardAcceptableToTi2","_slicedToArray","shouldAccept","whichPlayer","html","detach","appendTo","trigger","resetHLTiles","previewCardPlacementEffect","board","find","pawnTiles","affectedTiles","abilities","eval","tileX","split","tileY","forEach","pawnTile","col","row","targetTile","children","aTile","ability","previewVisualEffectTo","each","n","remove","sourceTile","append","syncCardSelectionToInputs","cardIds","index","element","cardId","push","showDetailOfCardInCanvas","s","showDetailLinkOfCard","hideDetailLinkOfCard","_this","addCardToSelection","userCardId","quantityInput","siblings","quantity","countOfCardsInDeck","alert","userCard","clone","prop","actionRow","click","removeCardFromSelection","parent","setupCardInteractions","_defineProperty","revert","snap","snapMode","snapTolerance","stack","setupBoardInteractions","droppable","hoverClass","accept","drop","over","out","document","on","tooltip"],"sources":["/Volumes/datahd/dev_apps/queens_blood_by_fan/app/javascript/packs/cards.js"],"sourcesContent":["function getMainBoard() {\n  let mainBoard = $(\".board-wrapper > table > tbody\").first();\n  window.mainBoard = mainBoard;\n  return mainBoard;\n}\nfunction showBoardNotice(message, type = 'info') {\n  var bgClass = 'bg-' + type;\n  $(\"#board_notice\").removeClass(bgClass).addClass(bgClass).text(message).css('opacity', 1);\n  window.setTimeout(function(){ $(\"#board_notice\").css('opacity', 0); }, 2000);\n}\nwindow.showBoardNotice = showBoardNotice;\nMAX_CARDS_PER_DECK = 15; // Best to refer this to backend constant\nwindow.MAX_CARDS_PER_DECK = MAX_CARDS_PER_DECK;\n\n/* Status and questionaire functions ******************/\nfunction isCardAcceptableToTile(card, tile) {\n  var isAcceptable = ( card.attr('data-player') == tile.attr('data-player') );\n  var msg = (isAcceptable) ? '' : \"Currently this tile is not claimed by you.\";\n  var currentTurnUserId = $(\"#game_current_turn_user_id\").val();\n  if (isAcceptable && currentTurnUserId && currentTurnUserId != '') {\n    isAcceptable = (card.attr('data-player') == currentTurnUserId);\n    msg = (isAcceptable) ? '' : \"Currently it is not your turn to make move.\";\n  }\n  // check card's pawn_rank vs tile's pawn_value\n  if (isAcceptable && card.data('pawn-rank') && tile.data('pawn-value')) {\n    isAcceptable = ( parseInt(card.data('pawn-rank')) <= parseInt(tile.data('pawn-value')) );\n    msg = (isAcceptable) ? '' : \"This card requires the tile w/ \" + card.data('pawn-rank') + \"+ pawns\"\n  }\n  return [isAcceptable, msg];\n}\nfunction shouldDragRevertDragToTile() {\n  //////////console.log(\"Should revert? \" + $(this).attr('id') + \" w/ \" + $(this).attr('class') );\n  return !$(this).hasClass('card-dropped');\n}\n\n/* Action Handlers *************************************/\nfunction dropCardHandler(event, ui) {\n  var [shouldAccept, msg] = isCardAcceptableToTile( ui.draggable, $(this));\n  //console.log(\"Card dropped \" + ui.draggable.attr('id') + \" on \" + $(this).attr('id') + \" => \"+ shouldAccept );\n\n  if (shouldAccept) {\n    ui.draggable.data('board-tile-id', $(this).attr('id') );\n    ui.draggable.draggable( 'disable' );\n    //$(this).droppable( 'disable' );\n    //ui.draggable.position( { of: $(this), my: 'left top', at: 'left top' } );\n    var whichPlayer = ui.draggable.data('player');\n    $(this).html('');\n    $(ui.draggable).detach().appendTo( $(this) );\n    ui.draggable.addClass('card-dropped');\n    ui.draggable.removeClass('small-card');\n\n    ui.draggable.draggable( 'option', 'revert', false );\n\n    $(\"#game_move_card_id\").val( ui.draggable.attr('data-card-id') );\n    $(\"#game_move_game_board_tile_id\").val( $(this).attr('data-game-board-tile-id') );\n    $(\"#game_move_submit_button\").trigger('click'); // $(\"#game_move_form\").trigger('submit');\n\n    $(this).attr('data-claiming-player', whichPlayer ); // If drop onto pawn, would be unnecessary\n  } else {\n    // console.log(\"> Cannot drop this card here!\");\n    showBoardNotice( (msg == '') ? \"Cannot drop this card here!\" : msg, 'warning');\n  }\n  resetHLTiles();\n}\n/* Dry run that only renders the effects of the card placement.\n* Iterates over the pawn-tiles and affected-tiles of the card to highlight the tiles that would be affected.\n*/\nfunction previewCardPlacementEffect(board, tile, card) {\n  var shouldAccept = isCardAcceptableToTile( card, tile );\n  //////////// console.log(\"Card hover - preview \" + card.attr('data-player') + \" on \" + tile.attr('data-player') + \" => \"+ shouldAccept );\n  if (!shouldAccept) {\n    tile.find(\".disabled-icon\").removeClass('d-none');\n    return; \n  }\n\n  var pawnTiles = card.data('pawn-tiles');\n  var affectedTiles = card.data('affected-tiles');\n  var abilities = card.data('ability-effects');\n  if (typeof(abilities) == 'string' && abilities !='' ){ \n    abilities = eval(abilities); \n  }\n  \n  tile.addClass('center-tile');\n  var tileX = parseInt(tile.data('tile-position').split(',')[0]);\n  var tileY = parseInt(tile.data('tile-position').split(',')[1]);\n  if (typeof(pawnTiles) == 'string'){ pawnTiles = eval(pawnTiles); }\n  pawnTiles.forEach(function(pawnTile) {\n    var col = tileX + pawnTile[0];\n    var row = tileY + pawnTile[1];\n    var targetTile = board.find('.board-tile[data-tile-position=\"' + col + ',' + row + '\"]');\n    if (targetTile.length > 0) {\n      targetTile.addClass('highlight-tile');\n      targetTile.children('.card').addClass('highlight-tile');\n    }\n  } );\n  if (typeof(affectedTiles) == 'string'){ affectedTiles = eval(affectedTiles); }\n  affectedTiles.forEach(function(aTile) {\n    var col = tileX + aTile[0];\n    var row = tileY + aTile[1];\n    var targetTile = board.find('.board-tile[data-tile-position=\"' + col + ',' + row + '\"]');\n    if (targetTile.length > 0) {\n      abilities.forEach(function(ability) {\n        targetTile.addClass('highlight-tile');\n        targetTile.children('.card').addClass('highlight-tile');\n        // console.log(\"Preview ability effect to \" + targetTile.attr('id') + \" => \" + ability['action_typeß'] );\n        previewVisualEffectTo(tile, targetTile, ability);\n      });\n    }\n  } );\n}\nfunction resetHLTiles() {\n  let board = getMainBoard();\n  board.find('.highlight-tile').removeClass('highlight-tile');\n  board.find('.center-tile').find(\".disabled-icon\").addClass('d-none');\n  board.find('.center-tile').removeClass('center-tile');\n  board.find('.preview-effect-label').each(function(n){ $(this).remove() });\n}\n/* \n* Renders the visual effect of the card placement on the target tile based on ability.\n*/\nfunction previewVisualEffectTo(sourceTile, targetTile, ability) \n{\n  if (ability['action_type'] == 'power_up') {\n    $(targetTile.children()[0]).append(\"<h3 class='preview-effect-label powerup-effect'> +\" + ability['action_value'] + \"</h3>\")\n  } else if (ability['action_type'] == 'power_down') {\n    $(targetTile.children()[0]).append(\"<h3 class='preview-effect-label powerdown-effect'> -\" + ability['action_value'] + \"</h3>\")\n  }\n}\n\nfunction syncCardSelectionToInputs(){\n  var cardIds = [];\n  $('#deck_cards_wrapper > *[data-card-id]').each(function(index, element) {\n    var cardId = $(element).data('card-id');\n    cardIds.push(cardId);\n  });\n  $(\"#deck_form input[name='card_ids[]']\").each(function(index, element) {\n    $(element).val( cardIds[index] || '' );\n  });\n}\nfunction showDetailOfCardInCanvas() {\n  var s = \"<img src='\" + $(this).data('image-url') + \"' class='img-fluid' />\";\n  if ($(this).data('card-id')) {\n    s += \"<div class='text-center'><a href=\\'/cards/\" + $(this).data('card-id') + \"'><label class='bi bi-info-square-fill text-primary text-medium'/> Show detail of card</a></div>\";\n  }\n  $('#detail_offcanvas').find('.offcanvas-body').html(s);\n}\nfunction showDetailLinkOfCard() {\n    $(this).find('.card-detail-image').removeClass('d-none');\n}\nfunction hideDetailLinkOfCard() {\n  setTimeout(() => {\n    $(this).find('.card-detail-image').addClass('d-none');\n  }, 3000);\n}\n\nfunction addCardToSelection(event) {\n  const userCardId = $(this).data('user-card-id');\n  const cardId = $(this).data('card-id');\n  var quantityInput = $(this).siblings('*[data-quantity]');\n  if (quantityInput) {\n    var quantity = parseInt(quantityInput.text()) || 0;\n    var countOfCardsInDeck = $(\"#deck_cards_wrapper > *[data-card-id]\").length;\n    if (quantity < 1) {\n      quantityInput.addClass('warning-short-blink');\n    } else if (countOfCardsInDeck >= MAX_CARDS_PER_DECK) {\n      $(\"#max_cards_per_deck_note\").addClass('warning-short-blink');\n      alert(\"You can only have \" + MAX_CARDS_PER_DECK + \" cards in your deck.\");\n    } else {\n      quantity -= 1;\n      quantityInput.text(quantity);\n      var userCard = $(\"#user_card_\"+ userCardId).clone();\n      $(userCard).prop('id', 'user_card_clone_' + userCardId);\n      $(userCard).attr('data-user-card-id', '');\n      $(userCard).removeClass('card-selectable');\n      var actionRow = $(userCard).children();\n      $(actionRow).children('.user-card-quantity-input').addClass('d-none');\n      $(actionRow).children('.user-card-add-button').addClass('d-none');\n      $(actionRow).children('.user-card-remove-button').removeClass('d-none');\n      $(userCard).appendTo($(\"#deck_cards_wrapper\"));\n      $(\"#user_card_clone_\" + userCardId + \" > .card-actions-row > .user-card-remove-button\").click( removeCardFromSelection );\n    }\n    $(\"#user_cards_wrapper > *[data-user-card-id='\" + userCardId + \"']\").css('opacity', (quantity < 1) ? '0.5' : '1');\n\n    syncCardSelectionToInputs();\n  }\n}\n\nfunction removeCardFromSelection() {\n  let card = $(this).parent().parent();\n  const cardId = $(card).data('card-id');\n  let userCard = $(\"#user_cards_wrapper > *[data-card-id='\" + cardId + \"']\");\n  if (userCard) {\n    var quantityInput = $(\"#user_cards_wrapper > *[data-card-id='\" + cardId + \"'] *[data-quantity]\");\n    if (quantityInput.length > 0) {\n      var quantity = parseInt( $(quantityInput).text()) || 0;\n      quantity++;\n      $(quantityInput).text(quantity);\n      $(\"#user_cards_wrapper > *[data-card-id='\" + cardId + \"']\").css('opacity', (quantity < 1) ? '0.5' : '1');\n    }\n    $(card).detach().remove();\n    // Even after removal, the #user_cards_wrapper\n    syncCardSelectionToInputs();\n  }\n}\n\n/* Load functions ########################################### */\n\nfunction setupCardInteractions() {\n  $(\".draggable\").draggable({ \n    \"opacity\": 0.35, revert: false,\n    snap: \".board-tile\", snapMode: \"inner\", snapTolerance: 30,\n    stack: \".card-wrapper div\",\n    revert: shouldDragRevertDragToTile\n  });\n}\n\nfunction setupBoardInteractions() {\n  \n  $(\".droppable\").droppable({\n    hoverClass: \"card-drop-hover\",\n    accept: '.card',\n    drop: dropCardHandler, \n    over: function(event, ui) {\n      /////// console.log(\"Card over \" + $(this).attr('id'));\n      //$(ui.draggable).children(\".bi\").removeClass('d-none');\n      $(this).addClass('center-tile');\n      previewCardPlacementEffect( getMainBoard(), $(this), $(ui.draggable) );\n    },\n    out: function(event, ui) {\n      /////// console.log(\"Card out \" + $(this).attr('id'));\n      //$(ui.draggable).children(\".bi\").addClass('d-none');\n      resetHLTiles();\n    }\n  });\n\n  /* $(document).on(\"dragstart\", \"card\", function (event) {\n    console.log(\"Card dragging \" + $(this).attr('id') );\n  }); */\n\n  $(document).on(\"dragstop\", \".card\", function (event) {\n    $(this).children(\".bi\").addClass('d-none');\n  });\n\n  $('.user-card-add-button').click( addCardToSelection );\n  $('.user-card-remove-button').click( removeCardFromSelection );\n  $(\".card-detail-link[data-image-url]\").click(showDetailOfCardInCanvas );\n  $(\".card[data-card-id]\").on('mouseover', showDetailLinkOfCard );\n  $(\".card[data-card-id]\").on('mouseout', hideDetailLinkOfCard );\n\n  window.showDetailOfCardInCanvas = showDetailOfCardInCanvas;\n\n  syncCardSelectionToInputs();\n\n  $(\"*[data-bs-toggle='tooltip'\").tooltip();\n}\n\n// Initialization\n$(document).on(\"turbolinks:load\", function(){\n  setupCardInteractions();\n  setupBoardInteractions();\n\n  $(\"*[data-bs-toggle='tooltip'\").tooltip();\n});"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}