{"ast":null,"code":"/*\n * BestInPlace (for jQuery)\n * version: 3.0.0.alpha (2014)\n *\n * By Bernat Farrero based on the work of Jan Varwig.\n * Examples at http://bernatfarrero.com\n *\n * Licensed under the MIT:\n * http://www.opensource.org/licenses/mit-license.php\n *\n * @requires jQuery\n *\n * Usage:\n *\n * Attention.\n * The format of the JSON object given to the select inputs is the following:\n * [[\"key\", \"value\"],[\"key\", \"value\"]]\n * The format of the JSON object given to the checkbox inputs is the following:\n * [\"falseValue\", \"trueValue\"]\n\n */\n//= require jquery.autosize\n\n// import jQuery from \"jquery\"\n\nfunction BestInPlaceEditor(e) {\n  'use strict';\n\n  this.element = e;\n  this.initOptions();\n  this.bindForm();\n  this.initPlaceHolder();\n  jQuery(this.activator).bind('click', {\n    editor: this\n  }, this.clickHandler);\n}\nBestInPlaceEditor.prototype = {\n  // Public Interface Functions //////////////////////////////////////////////\n\n  activate: function activate() {\n    'use strict';\n\n    var to_display;\n    if (this.isPlaceHolder()) {\n      to_display = \"\";\n    } else if (this.original_content) {\n      to_display = this.original_content;\n    } else {\n      switch (this.formType) {\n        case 'input':\n        case 'textarea':\n          if (this.display_raw) {\n            to_display = this.element.html().replace(/&amp;/gi, '&');\n          } else {\n            var value = this.element.data('bipValue');\n            if (typeof value === 'undefined') {\n              to_display = '';\n            } else if (typeof value === 'string') {\n              to_display = this.element.data('bipValue').replace(/&amp;/gi, '&');\n            } else {\n              to_display = this.element.data('bipValue');\n            }\n          }\n          break;\n        case 'select':\n          to_display = this.element.html();\n      }\n    }\n    this.oldValue = this.isPlaceHolder() ? \"\" : this.element.html();\n    this.display_value = to_display;\n    jQuery(this.activator).unbind(\"click\", this.clickHandler);\n    this.activateForm();\n    this.element.trigger(jQuery.Event(\"best_in_place:activate\"));\n  },\n  abort: function abort() {\n    'use strict';\n\n    this.activateText(this.oldValue);\n    jQuery(this.activator).bind('click', {\n      editor: this\n    }, this.clickHandler);\n    this.element.trigger(jQuery.Event(\"best_in_place:abort\"));\n    this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n  },\n  abortIfConfirm: function abortIfConfirm() {\n    'use strict';\n\n    if (!this.useConfirm) {\n      this.abort();\n      return;\n    }\n    if (confirm(BestInPlaceEditor.defaults.locales[''].confirmMessage)) {\n      this.abort();\n    }\n  },\n  update: function update() {\n    'use strict';\n\n    this.element.trigger(jQuery.Event(\"best_in_place:before-update\"));\n    var editor = this,\n      value = this.getValue();\n\n    // Avoid request if no change is made\n    if (this.formType in {\n      \"input\": 1,\n      \"textarea\": 1\n    } && value === this.oldValue) {\n      this.abort();\n      return true;\n    }\n    editor.ajax({\n      \"type\": this.requestMethod(),\n      \"dataType\": BestInPlaceEditor.defaults.ajaxDataType,\n      \"data\": editor.requestData(),\n      \"success\": function success(data, status, xhr) {\n        editor.loadSuccessCallback(data, status, xhr);\n      },\n      \"error\": function error(request, _error) {\n        editor.loadErrorCallback(request, _error);\n      }\n    });\n    switch (this.formType) {\n      case \"select\":\n        this.previousCollectionValue = value;\n\n        // search for the text for the span\n        $.each(this.values, function (index, arr) {\n          if (String(arr[0]) === String(value)) editor.element.html(arr[1]);\n        });\n        break;\n      case \"checkbox\":\n        $.each(this.values, function (index, arr) {\n          if (String(arr[0]) === String(value)) editor.element.html(arr[1]);\n        });\n        break;\n      default:\n        if (value !== \"\") {\n          if (this.display_raw) {\n            editor.element.html(value);\n          } else {\n            editor.element.text(value);\n          }\n        } else {\n          editor.element.html(this.placeHolder);\n        }\n    }\n    editor.element.data('bipValue', value);\n    editor.element.attr('data-bip-value', value);\n    editor.element.trigger(jQuery.Event(\"best_in_place:update\"));\n  },\n  activateForm: function activateForm() {\n    'use strict';\n\n    alert(BestInPlaceEditor.defaults.locales[''].uninitializedForm);\n  },\n  activateText: function activateText(value) {\n    'use strict';\n\n    this.element.html(value);\n    if (this.isPlaceHolder()) {\n      this.element.html(this.placeHolder);\n    }\n  },\n  // Helper Functions ////////////////////////////////////////////////////////\n\n  initOptions: function initOptions() {\n    // Try parent supplied info\n    'use strict';\n\n    var self = this;\n    self.element.parents().each(function () {\n      var $parent = jQuery(this);\n      self.url = self.url || $parent.data(\"bipUrl\");\n      self.activator = self.activator || $parent.data(\"bipActivator\");\n      self.okButton = self.okButton || $parent.data(\"bipOkButton\");\n      self.okButtonClass = self.okButtonClass || $parent.data(\"bipOkButtonClass\");\n      self.cancelButton = self.cancelButton || $parent.data(\"bipCancelButton\");\n      self.cancelButtonClass = self.cancelButtonClass || $parent.data(\"bipCancelButtonClass\");\n      self.skipBlur = self.skipBlur || $parent.data(\"bipSkipBlur\");\n    });\n\n    // Load own attributes (overrides all others)\n    self.url = self.element.data(\"bipUrl\") || self.url || document.location.pathname;\n    self.collection = self.element.data(\"bipCollection\") || self.collection;\n    self.formType = self.element.data(\"bipType\") || \"input\";\n    self.objectName = self.element.data(\"bipObject\") || self.objectName;\n    self.attributeName = self.element.data(\"bipAttribute\") || self.attributeName;\n    self.activator = self.element.data(\"bipActivator\") || self.element;\n    self.okButton = self.element.data(\"bipOkButton\") || self.okButton;\n    self.okButtonClass = self.element.data(\"bipOkButtonClass\") || self.okButtonClass || BestInPlaceEditor.defaults.okButtonClass;\n    self.cancelButton = self.element.data(\"bipCancelButton\") || self.cancelButton;\n    self.cancelButtonClass = self.element.data(\"bipCancelButtonClass\") || self.cancelButtonClass || BestInPlaceEditor.defaults.cancelButtonClass;\n    self.skipBlur = self.element.data(\"bipSkipBlur\") || self.skipBlur || BestInPlaceEditor.defaults.skipBlur;\n    self.isNewObject = self.element.data(\"bipNewObject\");\n    self.dataExtraPayload = self.element.data(\"bipExtraPayload\");\n\n    // Fix for default values of 0\n    if (self.element.data(\"bipPlaceholder\") == null) {\n      self.placeHolder = BestInPlaceEditor.defaults.locales[''].placeHolder;\n    } else {\n      self.placeHolder = self.element.data(\"bipPlaceholder\");\n    }\n    self.inner_class = self.element.data(\"bipInnerClass\");\n    self.html_attrs = self.element.data(\"bipHtmlAttrs\");\n    self.original_content = self.element.data(\"bipOriginalContent\") || self.original_content;\n\n    // if set the input won't be satinized\n    self.display_raw = self.element.data(\"bip-raw\");\n    self.useConfirm = self.element.data(\"bip-confirm\");\n    if (self.formType === \"select\" || self.formType === \"checkbox\") {\n      self.values = self.collection;\n      self.collectionValue = self.element.data(\"bipValue\") || self.collectionValue;\n    }\n  },\n  bindForm: function bindForm() {\n    'use strict';\n\n    this.activateForm = BestInPlaceEditor.forms[this.formType].activateForm;\n    this.getValue = BestInPlaceEditor.forms[this.formType].getValue;\n  },\n  initPlaceHolder: function initPlaceHolder() {\n    'use strict';\n\n    // TODO add placeholder for select and checkbox\n    if (this.element.html() === \"\") {\n      this.element.addClass('bip-placeholder');\n      this.element.html(this.placeHolder);\n    }\n  },\n  isPlaceHolder: function isPlaceHolder() {\n    'use strict';\n\n    // TODO: It only work when form is deactivated.\n    // Condition will fail when form is activated\n    return this.element.html() === \"\" || this.element.html() === this.placeHolder;\n  },\n  getValue: function getValue() {\n    'use strict';\n\n    alert(BestInPlaceEditor.defaults.locales[''].uninitializedForm);\n  },\n  // Trim and Strips HTML from text\n  sanitizeValue: function sanitizeValue(s) {\n    'use strict';\n\n    return jQuery.trim(s);\n  },\n  requestMethod: function requestMethod() {\n    'use strict';\n\n    return this.isNewObject ? 'post' : BestInPlaceEditor.defaults.ajaxMethod;\n  },\n  /* Generate the data sent in the POST request */\n  requestData: function requestData() {\n    'use strict';\n\n    // To prevent xss attacks, a csrf token must be defined as a meta attribute\n    var csrf_token = jQuery('meta[name=csrf-token]').attr('content'),\n      csrf_param = jQuery('meta[name=csrf-param]').attr('content');\n    var data = {};\n    data['_method'] = this.requestMethod();\n    data[this.objectName] = this.dataExtraPayload || {};\n    data[this.objectName][this.attributeName] = this.getValue();\n    if (csrf_param !== undefined && csrf_token !== undefined) {\n      data[csrf_param] = csrf_token;\n    }\n    return jQuery.param(data);\n  },\n  ajax: function ajax(options) {\n    'use strict';\n\n    options.url = this.url;\n    options.beforeSend = function (xhr) {\n      xhr.setRequestHeader(\"Accept\", \"application/json\");\n    };\n    return jQuery.ajax(options);\n  },\n  // Handlers ////////////////////////////////////////////////////////////////\n\n  loadSuccessCallback: function loadSuccessCallback(data, status, xhr) {\n    'use strict';\n\n    data = jQuery.trim(data);\n    //Update original content with current text.\n    if (this.display_raw) {\n      this.original_content = this.element.html();\n    } else {\n      this.original_content = this.element.text();\n    }\n    if (data && data !== \"\") {\n      var response = jQuery.parseJSON(data);\n      if (response !== null && response.hasOwnProperty(\"display_as\")) {\n        this.element.data('bip-original-content', this.element.text());\n        this.element.html(response.display_as);\n      }\n      if (this.isNewObject && response && response[this.objectName]) {\n        if (response[this.objectName][\"id\"]) {\n          this.isNewObject = false;\n          this.url += \"/\" + response[this.objectName][\"id\"]; // in REST a POST /thing url should become PUT /thing/123\n        }\n      }\n    }\n    this.element.toggleClass('bip-placeholder', this.isPlaceHolder());\n    this.element.trigger(jQuery.Event(\"best_in_place:success\"), [data, status, xhr]);\n    this.element.trigger(jQuery.Event(\"ajax:success\"), [data, status, xhr]);\n\n    // Binding back after being clicked\n    jQuery(this.activator).bind('click', {\n      editor: this\n    }, this.clickHandler);\n    this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n    if (this.collectionValue !== null && this.formType === \"select\") {\n      this.collectionValue = this.previousCollectionValue;\n      this.previousCollectionValue = null;\n    }\n  },\n  loadErrorCallback: function loadErrorCallback(request, error) {\n    'use strict';\n\n    this.activateText(this.oldValue);\n    this.element.trigger(jQuery.Event(\"best_in_place:error\"), [request, error]);\n    this.element.trigger(jQuery.Event(\"ajax:error\"), request, error);\n\n    // Binding back after being clicked\n    jQuery(this.activator).bind('click', {\n      editor: this\n    }, this.clickHandler);\n    this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n  },\n  clickHandler: function clickHandler(event) {\n    'use strict';\n\n    event.preventDefault();\n    event.data.editor.activate();\n  },\n  setHtmlAttributes: function setHtmlAttributes() {\n    'use strict';\n\n    var formField = this.element.find(this.formType);\n    if (this.html_attrs) {\n      var attrs = this.html_attrs;\n      $.each(attrs, function (key, val) {\n        formField.attr(key, val);\n      });\n    }\n  },\n  placeButtons: function placeButtons(output, field) {\n    'use strict';\n\n    if (field.okButton) {\n      output.append(jQuery(document.createElement('input')).attr('type', 'submit').attr('class', field.okButtonClass).attr('value', field.okButton));\n    }\n    if (field.cancelButton) {\n      output.append(jQuery(document.createElement('input')).attr('type', 'button').attr('class', field.cancelButtonClass).attr('value', field.cancelButton));\n    }\n  }\n};\n\n// Button cases:\n// If no buttons, then blur saves, ESC cancels\n// If just Cancel button, then blur saves, ESC or clicking Cancel cancels (careful of blur event!)\n// If just OK button, then clicking OK saves (careful of blur event!), ESC or blur cancels\n// If both buttons, then clicking OK saves, ESC or clicking Cancel or blur cancels\nBestInPlaceEditor.forms = {\n  \"input\": {\n    activateForm: function activateForm() {\n      'use strict';\n\n      var output = jQuery(document.createElement('form')).addClass('form_in_place').attr('action', 'javascript:void(0);').attr('style', 'display:inline');\n      var input_elt = jQuery(document.createElement('input')).attr('type', 'text').attr('name', this.attributeName).val(this.display_value);\n\n      // Add class to form input\n      if (this.inner_class) {\n        input_elt.addClass(this.inner_class);\n      }\n      output.append(input_elt);\n      this.placeButtons(output, this);\n      this.element.html(output);\n      this.setHtmlAttributes();\n      this.element.find(\"input[type='text']\")[0].select();\n      this.element.find(\"form\").bind('submit', {\n        editor: this\n      }, BestInPlaceEditor.forms.input.submitHandler);\n      if (this.cancelButton) {\n        this.element.find(\"input[type='button']\").bind('click', {\n          editor: this\n        }, BestInPlaceEditor.forms.input.cancelButtonHandler);\n      }\n      if (!this.okButton) {\n        this.element.find(\"input[type='text']\").bind('blur', {\n          editor: this\n        }, BestInPlaceEditor.forms.input.inputBlurHandler);\n      }\n      this.element.find(\"input[type='text']\").bind('keyup', {\n        editor: this\n      }, BestInPlaceEditor.forms.input.keyupHandler);\n      this.blurTimer = null;\n      this.userClicked = false;\n    },\n    getValue: function getValue() {\n      'use strict';\n\n      return this.sanitizeValue(this.element.find(\"input\").val());\n    },\n    // When buttons are present, use a timer on the blur event to give precedence to clicks\n    inputBlurHandler: function inputBlurHandler(event) {\n      'use strict';\n\n      if (event.data.editor.okButton) {\n        event.data.editor.blurTimer = setTimeout(function () {\n          if (!event.data.editor.userClicked) {\n            event.data.editor.abort();\n          }\n        }, 500);\n      } else {\n        if (event.data.editor.cancelButton) {\n          event.data.editor.blurTimer = setTimeout(function () {\n            if (!event.data.editor.userClicked) {\n              event.data.editor.update();\n            }\n          }, 500);\n        } else {\n          event.data.editor.update();\n        }\n      }\n    },\n    submitHandler: function submitHandler(event) {\n      'use strict';\n\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.update();\n    },\n    cancelButtonHandler: function cancelButtonHandler(event) {\n      'use strict';\n\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.abort();\n      event.stopPropagation(); // Without this, click isn't handled\n    },\n    keyupHandler: function keyupHandler(event) {\n      'use strict';\n\n      if (event.keyCode === 27) {\n        event.data.editor.abort();\n        event.stopImmediatePropagation();\n      }\n    }\n  },\n  \"select\": {\n    activateForm: function activateForm() {\n      'use strict';\n\n      var output = jQuery(document.createElement('form')).attr('action', 'javascript:void(0)').attr('style', 'display:inline'),\n        selected = '',\n        select_elt = jQuery(document.createElement('select')).attr('class', this.inner_class !== null ? this.inner_class : ''),\n        currentCollectionValue = this.collectionValue,\n        key,\n        value,\n        a = this.values;\n      $.each(a, function (index, arr) {\n        key = arr[0];\n        value = arr[1];\n        var option_elt = jQuery(document.createElement('option')).val(key).html(value);\n        if (currentCollectionValue) {\n          if (String(key) === String(currentCollectionValue)) option_elt.attr('selected', 'selected');\n        }\n        select_elt.append(option_elt);\n      });\n      output.append(select_elt);\n      this.element.html(output);\n      this.setHtmlAttributes();\n      this.element.find(\"select\").bind('change', {\n        editor: this\n      }, BestInPlaceEditor.forms.select.blurHandler);\n      this.element.find(\"select\").bind('blur', {\n        editor: this\n      }, BestInPlaceEditor.forms.select.blurHandler);\n      this.element.find(\"select\").bind('keyup', {\n        editor: this\n      }, BestInPlaceEditor.forms.select.keyupHandler);\n      this.element.find(\"select\")[0].focus();\n\n      // automatically click on the select so you\n      // don't have to click twice\n      try {\n        var e = document.createEvent(\"MouseEvents\");\n        e.initMouseEvent(\"mousedown\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n        this.element.find(\"select\")[0].dispatchEvent(e);\n      } catch (e) {\n        // browser doesn't support this, e.g. IE8\n      }\n    },\n    getValue: function getValue() {\n      'use strict';\n\n      return this.sanitizeValue(this.element.find(\"select\").val());\n    },\n    blurHandler: function blurHandler(event) {\n      'use strict';\n\n      event.data.editor.update();\n    },\n    keyupHandler: function keyupHandler(event) {\n      'use strict';\n\n      if (event.keyCode === 27) {\n        event.data.editor.abort();\n      }\n    }\n  },\n  \"checkbox\": {\n    activateForm: function activateForm() {\n      'use strict';\n\n      this.collectionValue = !this.getValue();\n      this.setHtmlAttributes();\n      this.update();\n    },\n    getValue: function getValue() {\n      'use strict';\n\n      return this.collectionValue;\n    }\n  },\n  \"textarea\": {\n    activateForm: function activateForm() {\n      'use strict';\n\n      // grab width and height of text\n      var width = this.element.css('width');\n      var height = this.element.css('height');\n\n      // construct form\n      var output = jQuery(document.createElement('form')).addClass('form_in_place').attr('action', 'javascript:void(0);').attr('style', 'display:inline');\n      var textarea_elt = jQuery(document.createElement('textarea')).attr('name', this.attributeName).val(this.sanitizeValue(this.display_value));\n      if (this.inner_class !== null) {\n        textarea_elt.addClass(this.inner_class);\n      }\n      output.append(textarea_elt);\n      this.placeButtons(output, this);\n      this.element.html(output);\n      this.setHtmlAttributes();\n\n      // set width and height of textarea\n      jQuery(this.element.find(\"textarea\")[0]).css({\n        'min-width': width,\n        'min-height': height\n      });\n      jQuery(this.element.find(\"textarea\")[0]).autosize();\n      this.element.find(\"textarea\")[0].focus();\n      this.element.find(\"form\").bind('submit', {\n        editor: this\n      }, BestInPlaceEditor.forms.textarea.submitHandler);\n      if (this.cancelButton) {\n        this.element.find(\"input[type='button']\").bind('click', {\n          editor: this\n        }, BestInPlaceEditor.forms.textarea.cancelButtonHandler);\n      }\n      if (!this.skipBlur) {\n        this.element.find(\"textarea\").bind('blur', {\n          editor: this\n        }, BestInPlaceEditor.forms.textarea.blurHandler);\n      }\n      this.element.find(\"textarea\").bind('keyup', {\n        editor: this\n      }, BestInPlaceEditor.forms.textarea.keyupHandler);\n      this.blurTimer = null;\n      this.userClicked = false;\n    },\n    getValue: function getValue() {\n      'use strict';\n\n      return this.sanitizeValue(this.element.find(\"textarea\").val());\n    },\n    // When buttons are present, use a timer on the blur event to give precedence to clicks\n    blurHandler: function blurHandler(event) {\n      'use strict';\n\n      if (event.data.editor.okButton) {\n        event.data.editor.blurTimer = setTimeout(function () {\n          if (!event.data.editor.userClicked) {\n            event.data.editor.abortIfConfirm();\n          }\n        }, 500);\n      } else {\n        if (event.data.editor.cancelButton) {\n          event.data.editor.blurTimer = setTimeout(function () {\n            if (!event.data.editor.userClicked) {\n              event.data.editor.update();\n            }\n          }, 500);\n        } else {\n          event.data.editor.update();\n        }\n      }\n    },\n    submitHandler: function submitHandler(event) {\n      'use strict';\n\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.update();\n    },\n    cancelButtonHandler: function cancelButtonHandler(event) {\n      'use strict';\n\n      event.data.editor.userClicked = true;\n      clearTimeout(event.data.editor.blurTimer);\n      event.data.editor.abortIfConfirm();\n      event.stopPropagation(); // Without this, click isn't handled\n    },\n    keyupHandler: function keyupHandler(event) {\n      'use strict';\n\n      if (event.keyCode === 27) {\n        event.data.editor.abortIfConfirm();\n      }\n    }\n  }\n};\nBestInPlaceEditor.defaults = {\n  locales: {},\n  ajaxMethod: \"put\",\n  //TODO Change to patch when support to 3.2 is dropped\n  ajaxDataType: 'text',\n  okButtonClass: '',\n  cancelButtonClass: '',\n  skipBlur: false\n};\n\n// Default locale\nBestInPlaceEditor.defaults.locales[''] = {\n  confirmMessage: \"Are you sure you want to discard your changes?\",\n  uninitializedForm: \"The form was not properly initialized. getValue is unbound\",\n  placeHolder: '-'\n};\njQuery.fn.best_in_place = function () {\n  'use strict';\n\n  function setBestInPlace(element) {\n    if (!element.data('bestInPlaceEditor')) {\n      element.data('bestInPlaceEditor', new BestInPlaceEditor(element));\n      return true;\n    }\n  }\n  jQuery(this.context).delegate(this.selector, 'click', function () {\n    var el = jQuery(this);\n    if (setBestInPlace(el)) {\n      el.click();\n    }\n  });\n  this.each(function () {\n    setBestInPlace(jQuery(this));\n  });\n  return this;\n};","map":{"version":3,"names":["BestInPlaceEditor","e","element","initOptions","bindForm","initPlaceHolder","jQuery","activator","bind","editor","clickHandler","prototype","activate","to_display","isPlaceHolder","original_content","formType","display_raw","html","replace","value","data","oldValue","display_value","unbind","activateForm","trigger","Event","abort","activateText","abortIfConfirm","useConfirm","confirm","defaults","locales","confirmMessage","update","getValue","ajax","requestMethod","ajaxDataType","requestData","success","status","xhr","loadSuccessCallback","error","request","loadErrorCallback","previousCollectionValue","$","each","values","index","arr","String","text","placeHolder","attr","alert","uninitializedForm","self","parents","$parent","url","okButton","okButtonClass","cancelButton","cancelButtonClass","skipBlur","document","location","pathname","collection","objectName","attributeName","isNewObject","dataExtraPayload","inner_class","html_attrs","collectionValue","forms","addClass","sanitizeValue","s","trim","ajaxMethod","csrf_token","csrf_param","undefined","param","options","beforeSend","setRequestHeader","response","parseJSON","hasOwnProperty","display_as","toggleClass","event","preventDefault","setHtmlAttributes","formField","find","attrs","key","val","placeButtons","output","field","append","createElement","input_elt","select","input","submitHandler","cancelButtonHandler","inputBlurHandler","keyupHandler","blurTimer","userClicked","setTimeout","clearTimeout","stopPropagation","keyCode","stopImmediatePropagation","selected","select_elt","currentCollectionValue","a","option_elt","blurHandler","focus","createEvent","initMouseEvent","window","dispatchEvent","width","css","height","textarea_elt","autosize","textarea","fn","best_in_place","setBestInPlace","context","delegate","selector","el","click"],"sources":["/Volumes/datahd/dev_apps/queens_blood_by_fan/app/javascript/best_in_place.js"],"sourcesContent":["/*\n * BestInPlace (for jQuery)\n * version: 3.0.0.alpha (2014)\n *\n * By Bernat Farrero based on the work of Jan Varwig.\n * Examples at http://bernatfarrero.com\n *\n * Licensed under the MIT:\n * http://www.opensource.org/licenses/mit-license.php\n *\n * @requires jQuery\n *\n * Usage:\n *\n * Attention.\n * The format of the JSON object given to the select inputs is the following:\n * [[\"key\", \"value\"],[\"key\", \"value\"]]\n * The format of the JSON object given to the checkbox inputs is the following:\n * [\"falseValue\", \"trueValue\"]\n\n */\n//= require jquery.autosize\n\n// import jQuery from \"jquery\"\n\nfunction BestInPlaceEditor(e) {\n    'use strict';\n    this.element = e;\n    this.initOptions();\n    this.bindForm();\n    this.initPlaceHolder();\n    jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n}\n\nBestInPlaceEditor.prototype = {\n    // Public Interface Functions //////////////////////////////////////////////\n\n    activate: function () {\n        'use strict';\n        var to_display;\n        if (this.isPlaceHolder()) {\n            to_display = \"\";\n        } else if (this.original_content) {\n            to_display = this.original_content;\n        } else {\n            switch (this.formType) {\n                case 'input':\n                case 'textarea':\n                    if (this.display_raw) {\n                        to_display = this.element.html().replace(/&amp;/gi, '&');\n                    }\n                    else {\n                        var value = this.element.data('bipValue');\n                        if (typeof value === 'undefined') {\n                            to_display = '';\n                        } else if (typeof value === 'string') {\n                            to_display = this.element.data('bipValue').replace(/&amp;/gi, '&');\n                        } else {\n                            to_display = this.element.data('bipValue');\n                        }\n                    }\n                    break;\n                case 'select':\n                    to_display = this.element.html();\n\n            }\n        }\n\n        this.oldValue = this.isPlaceHolder() ? \"\" : this.element.html();\n        this.display_value = to_display;\n        jQuery(this.activator).unbind(\"click\", this.clickHandler);\n        this.activateForm();\n        this.element.trigger(jQuery.Event(\"best_in_place:activate\"));\n    },\n\n    abort: function () {\n        'use strict';\n        this.activateText(this.oldValue);\n        jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n        this.element.trigger(jQuery.Event(\"best_in_place:abort\"));\n        this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n    },\n\n    abortIfConfirm: function () {\n        'use strict';\n        if (!this.useConfirm) {\n            this.abort();\n            return;\n        }\n\n        if (confirm(BestInPlaceEditor.defaults.locales[''].confirmMessage)) {\n            this.abort();\n        }\n    },\n\n    update: function () {\n        'use strict';\n        \n        this.element.trigger(jQuery.Event(\"best_in_place:before-update\"));\n        \n        var editor = this,\n            value = this.getValue();\n\n        // Avoid request if no change is made\n        if (this.formType in {\"input\": 1, \"textarea\": 1} && value === this.oldValue) {\n            this.abort();\n            return true;\n        }\n\n        editor.ajax({\n            \"type\": this.requestMethod(),\n            \"dataType\": BestInPlaceEditor.defaults.ajaxDataType,\n            \"data\": editor.requestData(),\n            \"success\": function (data, status, xhr) {\n                editor.loadSuccessCallback(data, status, xhr);\n            },\n            \"error\": function (request, error) {\n                editor.loadErrorCallback(request, error);\n            }\n        });\n\n\n        switch (this.formType) {\n            case \"select\":\n                this.previousCollectionValue = value;\n\n                // search for the text for the span\n                $.each(this.values, function(index, arr){ if (String(arr[0]) === String(value)) editor.element.html(arr[1]); });\n                break;\n\n            case \"checkbox\":\n                $.each(this.values, function(index, arr){ if (String(arr[0]) === String(value)) editor.element.html(arr[1]); });\n                break;\n\n            default:\n                if (value !== \"\") {\n                    if (this.display_raw) {\n                        editor.element.html(value);\n                    } else {\n                        editor.element.text(value);\n                    }\n                } else {\n                    editor.element.html(this.placeHolder);\n                }\n        }\n\n        editor.element.data('bipValue', value);\n        editor.element.attr('data-bip-value', value);\n\n        editor.element.trigger(jQuery.Event(\"best_in_place:update\"));\n    },\n\n    activateForm: function () {\n        'use strict';\n        alert(BestInPlaceEditor.defaults.locales[''].uninitializedForm);\n    },\n\n    activateText: function (value) {\n        'use strict';\n        this.element.html(value);\n        if (this.isPlaceHolder()) {\n            this.element.html(this.placeHolder);\n        }\n    },\n\n    // Helper Functions ////////////////////////////////////////////////////////\n\n    initOptions: function () {\n        // Try parent supplied info\n        'use strict';\n        var self = this;\n        self.element.parents().each(function () {\n            var $parent = jQuery(this);\n            self.url = self.url || $parent.data(\"bipUrl\");\n            self.activator = self.activator || $parent.data(\"bipActivator\");\n            self.okButton = self.okButton || $parent.data(\"bipOkButton\");\n            self.okButtonClass = self.okButtonClass || $parent.data(\"bipOkButtonClass\");\n            self.cancelButton = self.cancelButton || $parent.data(\"bipCancelButton\");\n            self.cancelButtonClass = self.cancelButtonClass || $parent.data(\"bipCancelButtonClass\");\n            self.skipBlur = self.skipBlur || $parent.data(\"bipSkipBlur\");\n        });\n\n        // Load own attributes (overrides all others)\n        self.url = self.element.data(\"bipUrl\") || self.url || document.location.pathname;\n        self.collection = self.element.data(\"bipCollection\") || self.collection;\n        self.formType = self.element.data(\"bipType\") || \"input\";\n        self.objectName = self.element.data(\"bipObject\") || self.objectName;\n        self.attributeName = self.element.data(\"bipAttribute\") || self.attributeName;\n        self.activator = self.element.data(\"bipActivator\") || self.element;\n        self.okButton = self.element.data(\"bipOkButton\") || self.okButton;\n        self.okButtonClass = self.element.data(\"bipOkButtonClass\") || self.okButtonClass || BestInPlaceEditor.defaults.okButtonClass;\n        self.cancelButton = self.element.data(\"bipCancelButton\") || self.cancelButton;\n        self.cancelButtonClass = self.element.data(\"bipCancelButtonClass\") || self.cancelButtonClass || BestInPlaceEditor.defaults.cancelButtonClass;\n        self.skipBlur = self.element.data(\"bipSkipBlur\") || self.skipBlur || BestInPlaceEditor.defaults.skipBlur;\n        self.isNewObject = self.element.data(\"bipNewObject\");\n        self.dataExtraPayload = self.element.data(\"bipExtraPayload\");\n\n        // Fix for default values of 0\n        if (self.element.data(\"bipPlaceholder\") == null) {\n          self.placeHolder = BestInPlaceEditor.defaults.locales[''].placeHolder;\n        } else {\n          self.placeHolder = self.element.data(\"bipPlaceholder\");\n        }\n\n        self.inner_class = self.element.data(\"bipInnerClass\");\n        self.html_attrs = self.element.data(\"bipHtmlAttrs\");\n        self.original_content = self.element.data(\"bipOriginalContent\") || self.original_content;\n\n        // if set the input won't be satinized\n        self.display_raw = self.element.data(\"bip-raw\");\n\n        self.useConfirm = self.element.data(\"bip-confirm\");\n\n        if (self.formType === \"select\" || self.formType === \"checkbox\") {\n            self.values = self.collection;\n            self.collectionValue = self.element.data(\"bipValue\") || self.collectionValue;\n        }\n    },\n\n    bindForm: function () {\n        'use strict';\n        this.activateForm = BestInPlaceEditor.forms[this.formType].activateForm;\n        this.getValue = BestInPlaceEditor.forms[this.formType].getValue;\n    },\n\n\n    initPlaceHolder: function () {\n        'use strict';\n        // TODO add placeholder for select and checkbox\n        if (this.element.html() === \"\") {\n            this.element.addClass('bip-placeholder');\n            this.element.html(this.placeHolder);\n        }\n    },\n\n    isPlaceHolder: function () {\n        'use strict';\n        // TODO: It only work when form is deactivated.\n        // Condition will fail when form is activated\n        return this.element.html() === \"\" || this.element.html() === this.placeHolder;\n    },\n\n    getValue: function () {\n        'use strict';\n        alert(BestInPlaceEditor.defaults.locales[''].uninitializedForm);\n    },\n\n    // Trim and Strips HTML from text\n    sanitizeValue: function (s) {\n        'use strict';\n        return jQuery.trim(s);\n    },\n\n    requestMethod: function() {\n        'use strict';\n        return this.isNewObject ? 'post' : BestInPlaceEditor.defaults.ajaxMethod;\n    },\n\n    /* Generate the data sent in the POST request */\n    requestData: function () {\n        'use strict';\n        // To prevent xss attacks, a csrf token must be defined as a meta attribute\n        var csrf_token = jQuery('meta[name=csrf-token]').attr('content'),\n            csrf_param = jQuery('meta[name=csrf-param]').attr('content');\n\n        var data = {}\n        data['_method'] = this.requestMethod()\n\n        data[this.objectName] = this.dataExtraPayload || {}\n\n        data[this.objectName][this.attributeName] = this.getValue()\n\n        if (csrf_param !== undefined && csrf_token !== undefined) {\n            data[csrf_param] = csrf_token\n        }\n        return jQuery.param(data);\n    },\n\n    ajax: function (options) {\n        'use strict';\n        options.url = this.url;\n        options.beforeSend = function (xhr) {\n            xhr.setRequestHeader(\"Accept\", \"application/json\");\n        };\n        return jQuery.ajax(options);\n    },\n\n    // Handlers ////////////////////////////////////////////////////////////////\n\n    loadSuccessCallback: function (data, status, xhr) {\n        'use strict';\n        data = jQuery.trim(data);\n        //Update original content with current text.\n        if (this.display_raw) {\n          this.original_content = this.element.html();\n        } else {\n          this.original_content = this.element.text();\n        }\n\n        if (data && data !== \"\") {\n            var response = jQuery.parseJSON(data);\n            if (response !== null && response.hasOwnProperty(\"display_as\")) {\n                this.element.data('bip-original-content', this.element.text());\n                this.element.html(response.display_as);\n            }\n            if (this.isNewObject && response && response[this.objectName]) {\n                if (response[this.objectName][\"id\"]) {\n                    this.isNewObject = false\n                    this.url += \"/\" + response[this.objectName][\"id\"] // in REST a POST /thing url should become PUT /thing/123\n                }\n            }\n        }\n        this.element.toggleClass('bip-placeholder', this.isPlaceHolder());\n\n        this.element.trigger(jQuery.Event(\"best_in_place:success\"), [data, status, xhr]);\n        this.element.trigger(jQuery.Event(\"ajax:success\"), [data, status, xhr]);\n\n        // Binding back after being clicked\n        jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n        this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n\n        if (this.collectionValue !== null && this.formType === \"select\") {\n            this.collectionValue = this.previousCollectionValue;\n            this.previousCollectionValue = null;\n        }\n    },\n\n    loadErrorCallback: function (request, error) {\n        'use strict';\n        this.activateText(this.oldValue);\n\n        this.element.trigger(jQuery.Event(\"best_in_place:error\"), [request, error]);\n        this.element.trigger(jQuery.Event(\"ajax:error\"), request, error);\n\n        // Binding back after being clicked\n        jQuery(this.activator).bind('click', {editor: this}, this.clickHandler);\n        this.element.trigger(jQuery.Event(\"best_in_place:deactivate\"));\n    },\n\n    clickHandler: function (event) {\n        'use strict';\n        event.preventDefault();\n        event.data.editor.activate();\n    },\n\n    setHtmlAttributes: function () {\n        'use strict';\n        var formField = this.element.find(this.formType);\n\n        if (this.html_attrs) {\n            var attrs = this.html_attrs;\n            $.each(attrs, function (key, val) {\n                formField.attr(key, val);\n            });\n        }\n    },\n\n    placeButtons: function (output, field) {\n        'use strict';\n        if (field.okButton) {\n            output.append(\n                jQuery(document.createElement('input'))\n                    .attr('type', 'submit')\n                    .attr('class', field.okButtonClass)\n                    .attr('value', field.okButton)\n            );\n        }\n        if (field.cancelButton) {\n            output.append(\n                jQuery(document.createElement('input'))\n                    .attr('type', 'button')\n                    .attr('class', field.cancelButtonClass)\n                    .attr('value', field.cancelButton)\n            );\n        }\n    }\n};\n\n\n// Button cases:\n// If no buttons, then blur saves, ESC cancels\n// If just Cancel button, then blur saves, ESC or clicking Cancel cancels (careful of blur event!)\n// If just OK button, then clicking OK saves (careful of blur event!), ESC or blur cancels\n// If both buttons, then clicking OK saves, ESC or clicking Cancel or blur cancels\nBestInPlaceEditor.forms = {\n    \"input\": {\n        activateForm: function () {\n            'use strict';\n            var output = jQuery(document.createElement('form'))\n                .addClass('form_in_place')\n                .attr('action', 'javascript:void(0);')\n                .attr('style', 'display:inline');\n            var input_elt = jQuery(document.createElement('input'))\n                .attr('type', 'text')\n                .attr('name', this.attributeName)\n                .val(this.display_value);\n\n            // Add class to form input\n            if (this.inner_class) {\n                input_elt.addClass(this.inner_class);\n            }\n\n            output.append(input_elt);\n            this.placeButtons(output, this);\n\n            this.element.html(output);\n            this.setHtmlAttributes();\n\n            this.element.find(\"input[type='text']\")[0].select();\n            this.element.find(\"form\").bind('submit', {editor: this}, BestInPlaceEditor.forms.input.submitHandler);\n            if (this.cancelButton) {\n                this.element.find(\"input[type='button']\").bind('click', {editor: this}, BestInPlaceEditor.forms.input.cancelButtonHandler);\n            }\n            if (!this.okButton) {\n                this.element.find(\"input[type='text']\").bind('blur', {editor: this}, BestInPlaceEditor.forms.input.inputBlurHandler);\n            }\n            this.element.find(\"input[type='text']\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.input.keyupHandler);\n            this.blurTimer = null;\n            this.userClicked = false;\n        },\n\n        getValue: function () {\n            'use strict';\n            return this.sanitizeValue(this.element.find(\"input\").val());\n        },\n\n        // When buttons are present, use a timer on the blur event to give precedence to clicks\n        inputBlurHandler: function (event) {\n            'use strict';\n            if (event.data.editor.okButton) {\n                event.data.editor.blurTimer = setTimeout(function () {\n                    if (!event.data.editor.userClicked) {\n                        event.data.editor.abort();\n                    }\n                }, 500);\n            } else {\n                if (event.data.editor.cancelButton) {\n                    event.data.editor.blurTimer = setTimeout(function () {\n                        if (!event.data.editor.userClicked) {\n                            event.data.editor.update();\n                        }\n                    }, 500);\n                } else {\n                    event.data.editor.update();\n                }\n            }\n        },\n\n        submitHandler: function (event) {\n            'use strict';\n            event.data.editor.userClicked = true;\n            clearTimeout(event.data.editor.blurTimer);\n            event.data.editor.update();\n        },\n\n        cancelButtonHandler: function (event) {\n            'use strict';\n            event.data.editor.userClicked = true;\n            clearTimeout(event.data.editor.blurTimer);\n            event.data.editor.abort();\n            event.stopPropagation(); // Without this, click isn't handled\n        },\n\n        keyupHandler: function (event) {\n            'use strict';\n            if (event.keyCode === 27) {\n                event.data.editor.abort();\n                event.stopImmediatePropagation();\n            }\n        }\n    },\n\n    \"select\": {\n        activateForm: function () {\n            'use strict';\n            var output = jQuery(document.createElement('form'))\n                    .attr('action', 'javascript:void(0)')\n                    .attr('style', 'display:inline'),\n                selected = '',\n                select_elt = jQuery(document.createElement('select'))\n                    .attr('class', this.inner_class !== null ? this.inner_class : ''),\n                currentCollectionValue = this.collectionValue,\n                key, value,\n                a = this.values;\n\n            $.each(a, function(index, arr){\n                key = arr[0];\n                value = arr[1];\n                var option_elt = jQuery(document.createElement('option'))\n                    .val(key)\n                    .html(value);\n\n                if (currentCollectionValue) {\n                  if (String(key) === String(currentCollectionValue)) option_elt.attr('selected', 'selected');\n                }\n                select_elt.append(option_elt);\n            });\n            output.append(select_elt);\n\n            this.element.html(output);\n            this.setHtmlAttributes();\n            this.element.find(\"select\").bind('change', {editor: this}, BestInPlaceEditor.forms.select.blurHandler);\n            this.element.find(\"select\").bind('blur', {editor: this}, BestInPlaceEditor.forms.select.blurHandler);\n            this.element.find(\"select\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.select.keyupHandler);\n            this.element.find(\"select\")[0].focus();\n\n            // automatically click on the select so you\n            // don't have to click twice\n            try {\n              var e = document.createEvent(\"MouseEvents\");\n              e.initMouseEvent(\"mousedown\", true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null);\n              this.element.find(\"select\")[0].dispatchEvent(e);\n            }\n            catch(e) {\n              // browser doesn't support this, e.g. IE8\n            }\n        },\n\n        getValue: function () {\n            'use strict';\n            return this.sanitizeValue(this.element.find(\"select\").val());\n        },\n\n        blurHandler: function (event) {\n            'use strict';\n            event.data.editor.update();\n        },\n\n        keyupHandler: function (event) {\n            'use strict';\n            if (event.keyCode === 27) {\n                event.data.editor.abort();\n            }\n        }\n    },\n\n    \"checkbox\": {\n        activateForm: function () {\n            'use strict';\n            this.collectionValue = !this.getValue();\n            this.setHtmlAttributes();\n            this.update();\n        },\n\n        getValue: function () {\n            'use strict';\n            return this.collectionValue;\n        }\n    },\n\n    \"textarea\": {\n        activateForm: function () {\n            'use strict';\n            // grab width and height of text\n            var width = this.element.css('width');\n            var height = this.element.css('height');\n\n            // construct form\n            var output = jQuery(document.createElement('form'))\n                .addClass('form_in_place')\n                .attr('action', 'javascript:void(0);')\n                .attr('style', 'display:inline');\n            var textarea_elt = jQuery(document.createElement('textarea'))\n                .attr('name', this.attributeName)\n                .val(this.sanitizeValue(this.display_value));\n\n            if (this.inner_class !== null) {\n                textarea_elt.addClass(this.inner_class);\n            }\n\n            output.append(textarea_elt);\n\n            this.placeButtons(output, this);\n\n            this.element.html(output);\n            this.setHtmlAttributes();\n\n            // set width and height of textarea\n            jQuery(this.element.find(\"textarea\")[0]).css({'min-width': width, 'min-height': height});\n            jQuery(this.element.find(\"textarea\")[0]).autosize();\n\n            this.element.find(\"textarea\")[0].focus();\n            this.element.find(\"form\").bind('submit', {editor: this}, BestInPlaceEditor.forms.textarea.submitHandler);\n\n            if (this.cancelButton) {\n                this.element.find(\"input[type='button']\").bind('click', {editor: this}, BestInPlaceEditor.forms.textarea.cancelButtonHandler);\n            }\n\n            if (!this.skipBlur) {\n                this.element.find(\"textarea\").bind('blur', {editor: this}, BestInPlaceEditor.forms.textarea.blurHandler);\n            }\n            this.element.find(\"textarea\").bind('keyup', {editor: this}, BestInPlaceEditor.forms.textarea.keyupHandler);\n            this.blurTimer = null;\n            this.userClicked = false;\n        },\n\n        getValue: function () {\n            'use strict';\n            return this.sanitizeValue(this.element.find(\"textarea\").val());\n        },\n\n        // When buttons are present, use a timer on the blur event to give precedence to clicks\n        blurHandler: function (event) {\n            'use strict';\n            if (event.data.editor.okButton) {\n                event.data.editor.blurTimer = setTimeout(function () {\n                    if (!event.data.editor.userClicked) {\n                        event.data.editor.abortIfConfirm();\n                    }\n                }, 500);\n            } else {\n                if (event.data.editor.cancelButton) {\n                    event.data.editor.blurTimer = setTimeout(function () {\n                        if (!event.data.editor.userClicked) {\n                            event.data.editor.update();\n                        }\n                    }, 500);\n                } else {\n                    event.data.editor.update();\n                }\n            }\n        },\n\n        submitHandler: function (event) {\n            'use strict';\n            event.data.editor.userClicked = true;\n            clearTimeout(event.data.editor.blurTimer);\n            event.data.editor.update();\n        },\n\n        cancelButtonHandler: function (event) {\n            'use strict';\n            event.data.editor.userClicked = true;\n            clearTimeout(event.data.editor.blurTimer);\n            event.data.editor.abortIfConfirm();\n            event.stopPropagation(); // Without this, click isn't handled\n        },\n\n        keyupHandler: function (event) {\n            'use strict';\n            if (event.keyCode === 27) {\n                event.data.editor.abortIfConfirm();\n            }\n        }\n    }\n};\n\nBestInPlaceEditor.defaults = {\n    locales: {},\n    ajaxMethod: \"put\",  //TODO Change to patch when support to 3.2 is dropped\n    ajaxDataType: 'text',\n    okButtonClass: '',\n    cancelButtonClass: '',\n    skipBlur: false\n};\n\n// Default locale\nBestInPlaceEditor.defaults.locales[''] = {\n    confirmMessage: \"Are you sure you want to discard your changes?\",\n    uninitializedForm: \"The form was not properly initialized. getValue is unbound\",\n    placeHolder: '-'\n};\n\njQuery.fn.best_in_place = function () {\n    'use strict';\n    function setBestInPlace(element) {\n        if (!element.data('bestInPlaceEditor')) {\n            element.data('bestInPlaceEditor', new BestInPlaceEditor(element));\n            return true;\n        }\n    }\n\n    jQuery(this.context).delegate(this.selector, 'click', function () {\n        var el = jQuery(this);\n        if (setBestInPlace(el)) {\n            el.click();\n        }\n    });\n\n    this.each(function () {\n        setBestInPlace(jQuery(this));\n    });\n\n    return this;\n};\n\n\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}